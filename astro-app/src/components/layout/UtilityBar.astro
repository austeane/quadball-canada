---
import type { Locale } from "../../utils/localization";

const props = Astro.props as { locale?: Locale } | undefined;
const locale: Locale = props?.locale ?? (Astro.url.pathname.startsWith("/fr/") ? "fr" : "en");

const socials = [
  {
    href: "https://www.instagram.com/quadballcanada/?hl=en",
    label: "Instagram",
    icon: "M12 2.163c3.204 0 3.584.012 4.85.07 1.366.062 2.633.343 3.608 1.319.975.975 1.257 2.242 1.319 3.608.058 1.266.069 1.645.069 4.84 0 3.196-.011 3.575-.069 4.84-.062 1.366-.344 2.633-1.319 3.608-.975.976-2.242 1.257-3.608 1.319-1.266.058-1.645.069-4.85.069-3.205 0-3.584-.011-4.85-.069-1.366-.062-2.633-.343-3.608-1.319-.975-.975-1.257-2.242-1.319-3.608C2.174 15.578 2.163 15.199 2.163 12c0-3.195.011-3.574.069-4.84.062-1.366.344-2.633 1.319-3.608.975-.976 2.242-1.257 3.608-1.319C8.416 2.174 8.795 2.163 12 2.163zm0-2.163C8.741 0 8.332.014 7.052.072 5.775.13 4.897.346 4.158.659c-.78.327-1.437.77-2.092 1.425C1.41 2.74.968 3.398.641 4.178.328 4.917.112 5.795.054 7.072.014 8.352 0 8.761 0 12c0 3.239.014 3.648.072 4.928.058 1.277.274 2.155.587 2.894.327.78.77 1.438 1.425 2.093.655.655 1.312 1.098 2.092 1.425.739.313 1.617.53 2.894.588C8.332 23.986 8.741 24 12 24s3.668-.014 4.948-.072c1.277-.058 2.155-.275 2.894-.588.78-.327 1.438-.77 2.093-1.425.655-.655 1.098-1.313 1.425-2.093.313-.739.53-1.617.588-2.894.058-1.28.072-1.689.072-4.928 0-3.239-.014-3.648-.072-4.928-.058-1.277-.275-2.155-.588-2.894-.327-.78-.77-1.438-1.425-2.093C21.552 1.41 20.894.968 20.114.641c-.739-.313-1.617-.53-2.894-.588C15.668.014 15.259 0 12 0zM12 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zm6.406-1.807a1.44 1.44 0 11-1.44-1.44 1.44 1.44 0 011.44 1.44z",
    box: 24,
  },
  {
    href: "https://www.tiktok.com/@quadballcanada",
    label: "TikTok",
    icon: "M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z",
    box: 24,
  },
  {
    href: "https://www.youtube.com/@QuadballCanada",
    label: "YouTube",
    icon: "M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z",
    box: 24,
  },
  {
    href: "https://www.facebook.com/QuidditchCanada/",
    label: "Facebook",
    icon: "M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z",
    box: 24,
  },
  {
    href: "https://discord.gg/qK2cnSWmvF",
    label: "Discord",
    icon: "M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z",
    box: 24,
  },
];
---

<div class="utility" role="navigation" aria-label="Utility">
  <div class="utility__inner">
    <ul class="utility__right" role="list">
      {socials.map((s) => (
        <li>
          <a target="_blank" rel="noopener" href={s.href} aria-label={s.label}>
            <svg width="18" height="18" viewBox={`0 0 ${s.box} ${s.box}`} aria-hidden="true">
              <path d={s.icon} fill="currentColor" />
            </svg>
          </a>
        </li>
      ))}
      <li class="utility__search">
        <a href="/search" aria-label={locale === "fr" ? "Recherche" : "Search"}>
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="currentColor" d="M10 2a8 8 0 105.3 14.1l4.3 4.3 1.4-1.4-4.3-4.3A8 8 0 0010 2zm0 2a6 6 0 110 12A6 6 0 0110 4z" />
          </svg>
        </a>
      </li>
    </ul>
  </div>
</div>

<style>
  .utility {
    background: var(--brand-primary);
    color: #fff;
    font-size: 0.875rem;
  }
  .utility__inner {
    width: 100%;
    padding: 8px clamp(16px, 4vw, 40px);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    flex-wrap: wrap;
  }
  .utility a {
    color: #fff;
    text-decoration: none;
    opacity: 0.95;
    transition: opacity 0.2s ease;
  }
  .utility a:hover {
    opacity: 1;
    text-decoration: underline;
  }
  .utility__right {
    display: flex;
    align-items: center;
    gap: 16px;
    margin: 0 0 0 auto;
    padding: 0;
    list-style: none;
  }
  .utility__right svg {
    display: block;
    transition: transform 0.2s ease;
  }
  .utility__right a:hover svg {
    transform: translateY(-1px);
  }
  .utility__search {
    display: inline-flex;
  }
  @media (max-width: 768px) {
    .utility__inner {
      padding: 8px 16px;
      flex-direction: column;
      align-items: flex-start;
    }
    .utility__right {
      margin-left: 0;
    }
  }
</style>
